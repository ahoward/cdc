<html xmlns="http://www.w3.org/1999/xhtml">
  <body>
    parent
    <hr />
    <div id='messages'></div>
    <hr />

  <!--
    note - the information here MUST match the cdc.initialize below
  -->
    <iframe src="http://codeforpeople.com/cdc/child.html" name="child"></iframe>

  </body>

  <script src="cdc.js"></script>

  <script>
    window.onload = function(){
      var say = function(msg){
        var messages = document.getElementById('messages');
        var message = document.createElement('div');
        message.innerHTML = msg;
        messages.appendChild(message);
      };

    /*
      note - the information provided here MUST match the child iframe above
    */
      cdc.initialize({
        role : 'server',
        target : frames.child,
        src : 'http://codeforpeople.com/cdc/child.html'
      });

      cdc.send("message from parent");
      cdc.recv(function(msg){ say('recv: ' + msg) });

      setTimeout(function(){ cdc.send("another message from parent") }, 200 + Math.random());
    };
  </script>
</html>
